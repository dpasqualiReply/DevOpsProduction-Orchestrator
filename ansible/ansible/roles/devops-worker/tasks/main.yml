---
# tasks file for devops-worker

- name: Install SBT
  include_role:
    name: sbt
    
- name: Install Spark
  include_role:
    name: spark

- name: Install Confluent
  include_role:
    name: confluent

- name: Create Real Time ML dir
  file:
    path: /opt/devops/realtime_ml
    owner: root
    group: root
    mode: 0644
    state: directory

- name: Create Real Time ETL dir
  file:
    path: /opt/devops/realtime_etl
    owner: root
    group: root
    mode: 0644
    state: directory

- name: Create Batch ML dir
  file:
    path: /opt/devops/batch_ml
    owner: root
    group: root
    mode: 0644
    state: directory

- name: Create Real Time ML dir
  file:
    path: /opt/devops/realtime_ml
    owner: root
    group: root
    mode: 0644
    state: directory

- name: Set hive-site.xml
  copy:
    src: hive-site.xml
    dest: $SPARK_HOME/conf/hive-site.xml
    owner: root
    group: root
    mode: 0644
  become: true
  become_flags: '-i'
